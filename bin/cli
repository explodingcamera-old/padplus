#!/usr/bin/env node

var program = require('commander');
var updateNotifier = require('update-notifier');
var os = require('os');
var fs = require('fs');
var path = require('path');
var colors = require('colors');

var _exit = process.exit;
var eol = os.EOL;
var pkg = require('../package.json');

var version = pkg.version;

updateNotifier({ pkg }).notify();


program
	.usage('<command> [options]')
  .version(version);

program.on('--help', function(){
  console.log('  To get additionaly help + options for a command, do');
	console.log();
  console.log('    $ padplus <command> --help');
	console.log('');
});

program
  .command('setup')
	.usage('[options]')
	.option('-T --type <type>', 'Type of installation', /^(full|medium|lite)$/i)
  .action(require('../src/setup.js'))
	.on('--help', function() {
	  console.log('  Examples:');
	  console.log();
	  console.log('    $ padplus setup light');
	  console.log('    $ padplus setup');
	  console.log();
	});

program
	.command('install <plugins>')
	.option('-S, --save', "Add plugin to")
  .action(require('../src/install.js'))
	.on('--help', function() {
	  console.log('  Examples:');
	  console.log();
	  console.log('    $ padplus install //installs all plugins in padplus.json');
		console.log('    $ padplus install contrib-');
	  console.log();
	});

program.parse(process.argv);

if (!program.args.length) {
	program.outputHelp(colors.cyan);
}
